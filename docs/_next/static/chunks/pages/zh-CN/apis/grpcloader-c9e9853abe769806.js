(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3092],{8714:function(e,i,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/zh-CN/apis/grpcloader",function(){return s(6310)}])},6310:function(e,i,s){"use strict";s.r(i),s.d(i,{default:function(){return HOC},useTOC:function(){return useTOC}});var n=s(5893),r=s(7812),l=s(5493),d=s(8925),h=s(5192);function useTOC(e){return[{value:"class GrpcLoader",id:"class-grpcloader",depth:3},{value:"init()",id:"init",depth:3},{value:"initClients()",id:"initclients",depth:3},{value:"client()",id:"client",depth:3},{value:"clientWithoutCache()",id:"clientwithoutcache",depth:3},{value:"realClient()",id:"realclient",depth:3},{value:"makeCredentials()",id:"makecredentials",depth:3},{value:"makeMetadata()",id:"makemetadata",depth:3},{value:"initServer()",id:"initserver",depth:3},{value:"callbackify()",id:"callbackify",depth:3},{value:"service()",id:"service",depth:3},{value:"type()",id:"type",depth:3},{value:"message()",id:"message",depth:3}]}let c=(0,r.c)(function(e){let{toc:i=useTOC(e)}=e,s=Object.assign({h1:"h1",h3:"h3",pre:"pre",code:"code",span:"span",p:"p",strong:"strong",ul:"ul",li:"li",hr:"hr",a:"a"},(0,d.a)(),e.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.h1,{children:"gRPC Loader API"}),"\n",(0,n.jsx)(s.h3,{id:i[0].id,children:i[0].value}),"\n",(0,n.jsx)(s.pre,{icon:h.Dr,"data-language":"js","data-copy":"",children:(0,n.jsxs)(s.code,{children:[(0,n.jsxs)(s.span,{children:[(0,n.jsx)(s.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"import"}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" GrpcLoader "}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"from"}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:" 'grpcity'"})]}),"\n",(0,n.jsx)(s.span,{children:" "}),"\n",(0,n.jsxs)(s.span,{children:[(0,n.jsx)(s.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"const"}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" loader"}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:" ="}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:" new"}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" GrpcLoader"}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"([{ location, files  }])"})]})]})}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"参数说明:"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["array: ",(0,n.jsx)(s.code,{children:"[ { location, files } ]"}),", 支持数组对象;"]}),"\n",(0,n.jsxs)(s.li,{children:["single: ",(0,n.jsx)(s.code,{children:"{ location, files }"}),", 支持单对象;"]}),"\n"]}),"\n",(0,n.jsxs)(s.p,{children:["其中，",(0,n.jsx)(s.code,{children:"{ location, files }"}),"说明:"]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"location"}),": (必选) path string, 例如: ",(0,n.jsx)(s.code,{children:"path.join(__dirname, './proto')"}),";"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"files"}),": (必选) array string, 例如: ",(0,n.jsx)(s.code,{children:"['path/to/service-a.proto', 'path/to/service-b.proto']"})]}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"返回值:"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"返回已经创建好的 GrpcLoader 实例，包含一系列内部变量、内部方法和外部方法。"}),"\n"]}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsxs)(s.p,{children:["下面将会展示",(0,n.jsx)(s.code,{children:"GrpcLoader"}),"里的 API"]}),"\n",(0,n.jsx)(s.h3,{id:i[1].id,children:i[1].value}),"\n",(0,n.jsx)(s.pre,{icon:h.Dr,"data-language":"js","data-copy":"",children:(0,n.jsx)(s.code,{children:(0,n.jsxs)(s.span,{children:[(0,n.jsx)(s.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"await"}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" loader."}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"init"}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"({ services, isDev, packagePrefix, loadOptions, channelOptions, appName })"})]})})}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"功能说明:"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"初始化，可以初始化所有客户端，实现 service proto 定义与服务端地址绑定，同时支持环境配置。"}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"参数说明:"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"services"}),": (任选一) 跟",(0,n.jsx)(s.code,{children:"initClient()"}),"里的参数一样，如果有这个参数，则可以跳过",(0,n.jsx)(s.code,{children:"initClient"}),"，直接完成client的初始化。同时支持字符串和对象参数；","\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"string"}),": (任一) ip+port 格式，如 ",(0,n.jsx)(s.code,{children:"127.0.0.1:9099"}),"；"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"object"}),": (任一) ",(0,n.jsx)(s.code,{children:"{ host, port }"}),"；","\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"host"}),": 字符串，支持 ip 和域名；"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"port"}),": 数字，最小值为0，最大值为65535；"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"isDev"}),": (可选) 布尔值，是否为开发模式；"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"packagePrefix"}),": (可选) 字符串，service name 包前缀，如: ",(0,n.jsx)(s.code,{children:"dev"}),", ",(0,n.jsx)(s.code,{children:"stage"}),"等等；"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"loadOptions"}),": (可选) proto load options；"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"channelOptions"}),": (可选) proto channel options；"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"appName"}),": (可选) 字符串，当前应用的应用名，用来标记；"]}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"返回值:"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"void: 空。"}),"\n"]}),"\n",(0,n.jsx)(s.h3,{id:i[2].id,children:i[2].value}),"\n",(0,n.jsx)(s.pre,{icon:h.Dr,"data-language":"js","data-copy":"",children:(0,n.jsx)(s.code,{children:(0,n.jsxs)(s.span,{children:[(0,n.jsx)(s.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"await"}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" loader."}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"initClients"}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"({ services, channelOptions, credentials })"})]})})}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"功能说明:"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"初始化所有客户端，实现 service proto 定义与服务端地址绑定。"}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"参数说明:"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"services"}),": (任选一) 跟",(0,n.jsx)(s.code,{children:"initClient()"}),"里的参数一样，如果有这个参数，则可以跳过",(0,n.jsx)(s.code,{children:"initClient"}),"，直接完成client的初始化。同时支持字符串和对象参数；","\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"string"}),": (任一) ip+port 格式，如 ",(0,n.jsx)(s.code,{children:"127.0.0.1:9099"}),"；"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"object"}),": (任一) ",(0,n.jsx)(s.code,{children:"{ host, port }"}),"；","\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"host"}),": 字符串，支持 ip 和域名；"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"port"}),": 数字，最小值为0，最大值为65535；"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"channelOptions"}),": (可选) proto channel options；"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"credentials"}),": (可选) 证书链，使用",(0,n.jsx)(s.code,{children:"makeCredentials()"}),"获取；"]}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"返回值:"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"void: 空。"}),"\n"]}),"\n",(0,n.jsx)(s.h3,{id:i[3].id,children:i[3].value}),"\n",(0,n.jsx)(s.pre,{icon:h.Dr,"data-language":"js","data-copy":"",children:(0,n.jsx)(s.code,{children:(0,n.jsxs)(s.span,{children:[(0,n.jsx)(s.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"await"}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" loader."}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"client"}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:"'path.to.serviceName'"}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:", { host, port, timeout, channelOptions, credentials })"})]})})}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"功能说明:"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["获取",(0,n.jsx)(s.code,{children:"'path.to.serviceName'"}),"对应的 proto 定义的 service 客户端实例，走",(0,n.jsx)(s.code,{children:"proxy"}),", ",(0,n.jsx)(s.strong,{children:"会缓存"}),"，可以查看 ",(0,n.jsx)(s.a,{href:"/apis/client-proxy",children:"Client Proxy"})," 获取更多使用API。"]}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"参数说明:"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"name"}),": (必选) proto 定义的 service，包路径 + service name；"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"host"}),": (可选) 字符串，支持 ip 和域名；"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"port"}),": (可选) 数字，最小值为0，最大值为65535；"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"timeout"}),": (可选) 数字，单位是毫秒，rpc 调用控制超时时间；"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"credentials"}),": (可选) 证书链，使用",(0,n.jsx)(s.code,{children:"makeCredentials()"}),"获取；"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"channelOptions"}),": (可选) proto channel options；"]}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"返回值:"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"void: 空。"}),"\n"]}),"\n",(0,n.jsx)(s.h3,{id:i[4].id,children:i[4].value}),"\n",(0,n.jsx)(s.pre,{icon:h.Dr,"data-language":"js","data-copy":"",children:(0,n.jsx)(s.code,{children:(0,n.jsxs)(s.span,{children:[(0,n.jsx)(s.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"await"}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" loader."}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"clientWithoutCache"}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:"'path.to.serviceName'"}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:", { host, port, timeout, credentials, channelOptions })"})]})})}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"功能说明:"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["获取",(0,n.jsx)(s.code,{children:"'path.to.serviceName'"}),"对应的 proto 定义的 service 客户端实例，走",(0,n.jsx)(s.code,{children:"proxy"}),", ",(0,n.jsx)(s.strong,{children:"不缓存"}),"，可以查看 ",(0,n.jsx)(s.a,{href:"/apis/client-proxy",children:"Client Proxy"})," 获取更多使用API。"]}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"参数说明:"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"name"}),": (必选) proto 定义的 service，包路径 + service name；"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"host"}),": (可选) 字符串，支持 ip 和域名；"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"port"}),": (可选) 数字，最小值为0，最大值为65535；"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"timeout"}),": (可选) 数字，单位是毫秒，rpc 调用控制超时时间；"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"credentials"}),": (可选) 证书链，使用",(0,n.jsx)(s.code,{children:"makeCredentials()"}),"获取；"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"channelOptions"}),": (可选) proto channel options；"]}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"返回值:"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"void: 空。"}),"\n"]}),"\n",(0,n.jsx)(s.h3,{id:i[5].id,children:i[5].value}),"\n",(0,n.jsx)(s.pre,{icon:h.Dr,"data-language":"js","data-copy":"",children:(0,n.jsx)(s.code,{children:(0,n.jsxs)(s.span,{children:[(0,n.jsx)(s.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"await"}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" loader."}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"realClient"}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:"'path.to.serviceName'"}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:", { host, port, timeout, credentials, channelOptions })"})]})})}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"功能说明:"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["获取",(0,n.jsx)(s.code,{children:"'path.to.serviceName'"}),"对应的 proto 定义的 service 客户端实例，不走",(0,n.jsx)(s.code,{children:"proxy"}),", ",(0,n.jsx)(s.strong,{children:"不缓存"}),"，返回不经过处理的 client 实例。"]}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"参数说明:"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"name"}),": (必选) proto 定义的 service，包路径 + service name；"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"host"}),": (可选) 字符串，支持 ip 和域名；"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"port"}),": (可选) 数字，最小值为0，最大值为65535；"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"timeout"}),": (可选) 数字，单位是毫秒，rpc 调用控制超时时间；"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"credentials"}),": (可选) 证书链，使用",(0,n.jsx)(s.code,{children:"makeCredentials()"}),"获取；"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"channelOptions"}),": (可选) proto channel options；"]}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"返回值:"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"void: 空。"}),"\n"]}),"\n",(0,n.jsx)(s.h3,{id:i[6].id,children:i[6].value}),"\n",(0,n.jsx)(s.pre,{icon:h.Dr,"data-language":"js","data-copy":"",children:(0,n.jsx)(s.code,{children:(0,n.jsxs)(s.span,{children:[(0,n.jsx)(s.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"const"}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" credentials"}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:" ="}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" loader."}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"makeCredentials"}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"(rootCerts, privateKey, certChain, verifyOptions)"})]})})}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"功能说明:"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"制作可供客户端使用的证书。"}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"参数说明:"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"rootCerts"}),": (可选) Buffer, 一般为 ca 文件；"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"privateKey"}),": (可选) Buffer, 一般为 key 文件；"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"certChain"}),": (可选) Buffer, 一般为 crt 文件；"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"verifyOptions"}),": (可选)，",(0,n.jsx)(s.code,{children:"{ checkServerIdentity }"}),"；","\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"checkServerIdentity"}),": callback函数, ",(0,n.jsx)(s.code,{children:"(hostname, cert) => { }"}),"；"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"返回值:"})}),"\n",(0,n.jsx)(s.p,{children:"存在两种情况:"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["如果有完整的参数，则返回:",(0,n.jsx)(s.code,{children:"grpc.credentials.createSsl()"}),"；"]}),"\n",(0,n.jsxs)(s.li,{children:["如果没有参数，则返回: ",(0,n.jsx)(s.code,{children:"grpc.credentials.createInsecure()"}),"；"]}),"\n"]}),"\n",(0,n.jsx)(s.h3,{id:i[7].id,children:i[7].value}),"\n",(0,n.jsx)(s.pre,{icon:h.Dr,"data-language":"js","data-copy":"",children:(0,n.jsx)(s.code,{children:(0,n.jsxs)(s.span,{children:[(0,n.jsx)(s.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"const"}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" meta"}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:" ="}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" loader."}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"makeMetadata"}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"({ key: value })"})]})})}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"功能说明:"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"创建供客户端使用的的 metadata 实例。"}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"参数说明:"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"object"}),": (必选)，对象:","\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"[key]"}),": 字符串，key 值；"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"[value]"}),": 字符串，或字符串数组，非字符串场合会在内部转 Buffer;"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"返回值:"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"Metadata"})," 实例。"]}),"\n"]}),"\n",(0,n.jsx)(s.h3,{id:i[8].id,children:i[8].value}),"\n",(0,n.jsx)(s.pre,{icon:h.Dr,"data-language":"js","data-copy":"",children:(0,n.jsx)(s.code,{children:(0,n.jsxs)(s.span,{children:[(0,n.jsx)(s.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"const"}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" server"}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:" ="}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" loader."}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"initServer"}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"(channelOptions)"})]})})}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"功能说明:"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["创建 gRPC server 实例，并提供一些列 server API。更多相关 API 请查看 ",(0,n.jsx)(s.a,{href:"/apis/server",children:"Server"})]}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"参数说明:"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"channelOptions"}),": (可选) proto channel options；"]}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"返回值:"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["返回 ",(0,n.jsx)(s.code,{children:"Server"})," 实例，可以查看 ",(0,n.jsx)(s.a,{href:"/apis/server",children:"Server"})," 获取更多 API。"]}),"\n"]}),"\n",(0,n.jsx)(s.h3,{id:i[9].id,children:i[9].value}),"\n",(0,n.jsx)(s.pre,{icon:h.Dr,"data-language":"js","data-copy":"",children:(0,n.jsx)(s.code,{children:(0,n.jsxs)(s.span,{children:[(0,n.jsx)(s.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"const"}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" methods"}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:" ="}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" loader."}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"callbackify"}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"(target, { exclude , inherit })"})]})})}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"功能说明:"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["主要是搭配",(0,n.jsx)(s.code,{children:"server.addService()"}),"使用，将",(0,n.jsx)(s.code,{children:"async func"}),"转换为",(0,n.jsx)(s.code,{children:"callback func"}),"，使得",(0,n.jsx)(s.code,{children:"server rpc"}),"与",(0,n.jsx)(s.code,{children:"target"}),"绑定。"]}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"参数说明:"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"target"}),": (必选) 包含",(0,n.jsx)(s.code,{children:"rpc func"}),"本身的对象或者实例。"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"object"}),": (可选) 对象:","\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"exclude"}),": (可选) 字符串数组，排除",(0,n.jsx)(s.code,{children:"target"}),"中不需要参与",(0,n.jsx)(s.code,{children:"service rpc"}),"绑定的方法；"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"inherit"}),": (可选) 如果 ",(0,n.jsx)(s.code,{children:"target"})," 通过继承的方式获得的",(0,n.jsx)(s.code,{children:"func"}),"也要参与绑定，则需要把继承的对象也要传参；"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"返回值:"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"callbackify methods"}),"对象，可以给 ",(0,n.jsx)(s.code,{children:"server.addService()"})," 使用，不会报错。"]}),"\n"]}),"\n",(0,n.jsx)(s.h3,{id:i[10].id,children:i[10].value}),"\n",(0,n.jsx)(s.pre,{icon:h.Dr,"data-language":"js","data-copy":"",children:(0,n.jsx)(s.code,{children:(0,n.jsxs)(s.span,{children:[(0,n.jsx)(s.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"const"}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" service"}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:" ="}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" loader."}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"service"}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"(name)"})]})})}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"功能说明:"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["获取",(0,n.jsx)(s.code,{children:"proto"}),"中的",(0,n.jsx)(s.code,{children:"service"}),"定义。"]}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"参数说明:"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"name"}),": (必选) 指 ",(0,n.jsx)(s.code,{children:"proto"})," 文件路由，具体是到 ",(0,n.jsx)(s.code,{children:"service"})," 的位置;"]}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"返回值:"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"proto"})," 中的 ",(0,n.jsx)(s.code,{children:"service"})," 定义。"]}),"\n"]}),"\n",(0,n.jsx)(s.h3,{id:i[11].id,children:i[11].value}),"\n",(0,n.jsx)(s.pre,{icon:h.Dr,"data-language":"js","data-copy":"",children:(0,n.jsx)(s.code,{children:(0,n.jsxs)(s.span,{children:[(0,n.jsx)(s.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"const"}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" type"}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:" ="}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" loader."}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"type"}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"(name)"})]})})}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"功能说明:"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["获取",(0,n.jsx)(s.code,{children:"proto"}),"中的",(0,n.jsx)(s.code,{children:"type"}),"定义;"]}),"\n",(0,n.jsxs)(s.li,{children:["能力上包含了",(0,n.jsx)(s.code,{children:"service()"}),";"]}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"参数说明:"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"name"}),": (必选) 指 ",(0,n.jsx)(s.code,{children:"proto"})," 文件路由，包名到",(0,n.jsx)(s.code,{children:"service"}),"，或到",(0,n.jsx)(s.code,{children:"model"}),"，或到",(0,n.jsx)(s.code,{children:"message"}),";"]}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"返回值:"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"proto"})," 中的 ",(0,n.jsx)(s.code,{children:"type"})," 定义。"]}),"\n"]}),"\n",(0,n.jsx)(s.h3,{id:i[12].id,children:i[12].value}),"\n",(0,n.jsx)(s.pre,{icon:h.Dr,"data-language":"js","data-copy":"",children:(0,n.jsx)(s.code,{children:(0,n.jsxs)(s.span,{children:[(0,n.jsx)(s.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"const"}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" message"}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:" ="}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" loader."}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"message"}),(0,n.jsx)(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"(name)"})]})})}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"功能说明:"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["获取",(0,n.jsx)(s.code,{children:"proto"}),"中的",(0,n.jsx)(s.code,{children:"message"}),"定义;"]}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"参数说明:"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"name"}),": (必选) 指 proto 文件的路由，具体是指路由 message 的链条名。"]}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"返回值:"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"proto"})," 中的 ",(0,n.jsx)(s.code,{children:"message"})," 定义。"]}),"\n"]})]})},"/zh-CN/apis/grpcloader",{filePath:"pages/zh-CN/apis/grpcloader.mdx",timestamp:1699236606e3,pageMap:l.v,frontMatter:{},title:"gRPC Loader API"},"undefined"==typeof RemoteContent?useTOC:RemoteContent.useTOC);function HOC(e){return c(e)}},5493:function(e,i,s){"use strict";s.d(i,{v:function(){return n}});let n=[{data:{index:"首页",start:"快速开始",guide:"用户指南",apis:"API"}},{name:"apis",route:"/zh-CN/apis",children:[{data:{grpcloader:"gRPC Loader",server:"Server","client-proxy":"Client Proxy"}},{name:"client-proxy",route:"/zh-CN/apis/client-proxy",frontMatter:{sidebar_label:"Client Proxy"}},{name:"grpcloader",route:"/zh-CN/apis/grpcloader",frontMatter:{sidebar_label:"Grpcloader"}},{name:"server",route:"/zh-CN/apis/server",frontMatter:{sidebar_label:"Server"}}]},{name:"apis",route:"/zh-CN/apis",frontMatter:{sidebar_label:"Apis"}},{name:"guide",route:"/zh-CN/guide",children:[{data:{loader:"Loader",config:"Config",server:"Server",client:"Client",metadata:"Metadata","stream-v2":"Stream v2",stream:"Stream",credentials:"Credentials",status:"Status",error:"Error",middleware:"Middleware",proto:"Proto"}},{name:"client",route:"/zh-CN/guide/client",frontMatter:{sidebar_label:"Client"}},{name:"config",route:"/zh-CN/guide/config",frontMatter:{sidebar_label:"Config"}},{name:"credentials",route:"/zh-CN/guide/credentials",frontMatter:{sidebar_label:"Credentials"}},{name:"error",route:"/zh-CN/guide/error",frontMatter:{sidebar_label:"Error"}},{name:"loader",route:"/zh-CN/guide/loader",frontMatter:{sidebar_label:"Loader"}},{name:"metadata",route:"/zh-CN/guide/metadata",frontMatter:{sidebar_label:"Metadata"}},{name:"middleware",route:"/zh-CN/guide/middleware",frontMatter:{sidebar_label:"Middleware"}},{name:"proto",route:"/zh-CN/guide/proto",frontMatter:{sidebar_label:"Proto"}},{name:"server",route:"/zh-CN/guide/server",frontMatter:{sidebar_label:"Server"}},{name:"status",route:"/zh-CN/guide/status",frontMatter:{sidebar_label:"Status"}},{name:"stream-v2",route:"/zh-CN/guide/stream-v2",frontMatter:{sidebar_label:"Stream V2"}},{name:"stream",route:"/zh-CN/guide/stream",frontMatter:{sidebar_label:"Stream"}}]},{name:"guide",route:"/zh-CN/guide",frontMatter:{sidebar_label:"Guide"}},{name:"index",route:"/zh-CN",frontMatter:{sidebar_label:"Index"}},{name:"start",route:"/zh-CN/start",children:[{data:{"proto-loader":"Proto Loader",server:"Server Side",client:"Client Side"}},{name:"client",route:"/zh-CN/start/client",frontMatter:{sidebar_label:"Client"}},{name:"proto-loader",route:"/zh-CN/start/proto-loader",frontMatter:{sidebar_label:"Proto Loader"}},{name:"server",route:"/zh-CN/start/server",frontMatter:{sidebar_label:"Server"}}]},{name:"start",route:"/zh-CN/start",frontMatter:{sidebar_label:"Start"}}]}},function(e){e.O(0,[7812,9774,2888,179],function(){return e(e.s=8714)}),_N_E=e.O()}]);