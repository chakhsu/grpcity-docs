(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3526],{8565:function(e,r,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/en-US/apis/server",function(){return i(173)}])},173:function(e,r,i){"use strict";i.r(r),i.d(r,{default:function(){return HOC},useTOC:function(){return useTOC}});var n=i(5893),s=i(7812),l=i(1054),d=i(8925),t=i(5192);function useTOC(e){return[{value:"addService()",id:"addservice",depth:3},{value:"removeService()",id:"removeservice",depth:3},{value:"makeServerCredentials()",id:"makeservercredentials",depth:3},{value:"addMiddleware()",id:"addmiddleware",depth:3},{value:"addMiddlewares()",id:"addmiddlewares",depth:3},{value:"listen()",id:"listen",depth:3},{value:"shutdown()",id:"shutdown",depth:3},{value:"forceShutdown()",id:"forceshutdown",depth:3}]}let a=(0,s.c)(function(e){let{toc:r=useTOC(e)}=e,i=Object.assign({h1:"h1",p:"p",code:"code",pre:"pre",span:"span",h3:"h3",strong:"strong",ul:"ul",li:"li"},(0,d.a)(),e.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.h1,{children:"Server API"}),"\n",(0,n.jsxs)(i.p,{children:["To obtain a ",(0,n.jsx)(i.code,{children:"server"})," instance, call ",(0,n.jsx)(i.code,{children:"loader.initServer()"}),", which provides a set of APIs to facilitate gRPC Server development."]}),"\n",(0,n.jsx)(i.pre,{icon:t.Dr,"data-language":"js","data-copy":"",children:(0,n.jsx)(i.code,{children:(0,n.jsxs)(i.span,{children:[(0,n.jsx)(i.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"const"}),(0,n.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" server"}),(0,n.jsx)(i.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:" ="}),(0,n.jsx)(i.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:" await"}),(0,n.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" loader."}),(0,n.jsx)(i.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"initServer"}),(0,n.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"(channelOptions)"})]})})}),"\n",(0,n.jsx)(i.h3,{id:r[0].id,children:r[0].value}),"\n",(0,n.jsx)(i.pre,{icon:t.Dr,"data-language":"js","data-copy":"",children:(0,n.jsx)(i.code,{children:(0,n.jsxs)(i.span,{children:[(0,n.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"server."}),(0,n.jsx)(i.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"addService"}),(0,n.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"(service, implementation)"})]})})}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.strong,{children:"Description:"})}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:["Binds the ",(0,n.jsx)(i.code,{children:"proto service rpc"})," definition to a specific execution implementation."]}),"\n"]}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.strong,{children:"Parameters:"})}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"service"}),": (required) The ",(0,n.jsx)(i.code,{children:"service"})," specified in the proto, obtained through ",(0,n.jsx)(i.code,{children:"loader.service(name)"}),";"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"implementation"}),": (required) An object or class with the methods defined by the service rpc, which needs to be made ",(0,n.jsx)(i.code,{children:"async"})," using ",(0,n.jsx)(i.code,{children:"loader.callbackify()"})," and supports middleware."]}),"\n"]}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.strong,{children:"Return Value:"})}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"void: No return value."}),"\n"]}),"\n",(0,n.jsx)(i.h3,{id:r[1].id,children:r[1].value}),"\n",(0,n.jsx)(i.pre,{icon:t.Dr,"data-language":"js","data-copy":"",children:(0,n.jsx)(i.code,{children:(0,n.jsxs)(i.span,{children:[(0,n.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"server."}),(0,n.jsx)(i.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"removeService"}),(0,n.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"(service)"})]})})}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.strong,{children:"Description:"})}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:["Unbinds a previously bound ",(0,n.jsx)(i.code,{children:"service"}),"."]}),"\n"]}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.strong,{children:"Parameters:"})}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"service"}),": (required) The ",(0,n.jsx)(i.code,{children:"service"})," specified in the proto, obtained through ",(0,n.jsx)(i.code,{children:"loader.service(name)"}),"."]}),"\n"]}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.strong,{children:"Return Value:"})}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"void: No return value."}),"\n"]}),"\n",(0,n.jsx)(i.h3,{id:r[2].id,children:r[2].value}),"\n",(0,n.jsx)(i.pre,{icon:t.Dr,"data-language":"js","data-copy":"",children:(0,n.jsx)(i.code,{children:(0,n.jsxs)(i.span,{children:[(0,n.jsx)(i.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"const"}),(0,n.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" credentials"}),(0,n.jsx)(i.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:" ="}),(0,n.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" server."}),(0,n.jsx)(i.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"makeServerCredentials"}),(0,n.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"(rootCerts, keyCertPairs, checkClientCertificate)"})]})})}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.strong,{children:"Description:"})}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"1"}),"\n"]}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.strong,{children:"Parameters:"})}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"rootCerts"}),": (optional) Buffer, typically the CA file;"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"keyCertPairs"}),": Certificate pairs, key and crt, must be an array;","\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"private_key"}),": (optional) Buffer, typically the key file;"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"cert_chain"}),": (optional) Buffer, typically the crt file;"]}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"checkClientCertificate"}),": (optional) Whether to check the client certificate;"]}),"\n"]}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.strong,{children:"Return Value:"})}),"\n",(0,n.jsx)(i.p,{children:"There are two scenarios:"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:["If all parameters are provided, it returns:",(0,n.jsx)(i.code,{children:"grpc.ServerCredentials.createSsl()"}),";"]}),"\n",(0,n.jsxs)(i.li,{children:["If no parameters are provided, it returns: ",(0,n.jsx)(i.code,{children:"grpc.ServerCredentials.createInsecure()"}),"."]}),"\n"]}),"\n",(0,n.jsx)(i.h3,{id:r[3].id,children:r[3].value}),"\n",(0,n.jsx)(i.pre,{icon:t.Dr,"data-language":"js","data-copy":"",children:(0,n.jsx)(i.code,{children:(0,n.jsxs)(i.span,{children:[(0,n.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"server."}),(0,n.jsx)(i.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"addMiddleware"}),(0,n.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"(fn)"})]})})}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.strong,{children:"Description:"})}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"Adds middleware to handle logic before and after the RPC."}),"\n"]}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.strong,{children:"Parameters:"})}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"fn"}),": (required) Middleware function, typically an ",(0,n.jsx)(i.code,{children:"async (ctx, next) => { await next() }"}),"."]}),"\n"]}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.strong,{children:"Return Value:"})}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"void: No return value."}),"\n"]}),"\n",(0,n.jsx)(i.h3,{id:r[4].id,children:r[4].value}),"\n",(0,n.jsx)(i.pre,{icon:t.Dr,"data-language":"js","data-copy":"",children:(0,n.jsx)(i.code,{children:(0,n.jsxs)(i.span,{children:[(0,n.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"server."}),(0,n.jsx)(i.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"addMiddlewares"}),(0,n.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"(fns)"})]})})}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.strong,{children:"Description:"})}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"Adds multiple middlewares to handle logic before and after the RPC."}),"\n"]}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.strong,{children:"Parameters:"})}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"fns"}),": (required) Array of middleware functions, typically ",(0,n.jsx)(i.code,{children:"[async (ctx, next) => { await next() }]"}),"."]}),"\n"]}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.strong,{children:"Return Value:"})}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"void: No return value."}),"\n"]}),"\n",(0,n.jsx)(i.h3,{id:r[5].id,children:r[5].value}),"\n",(0,n.jsx)(i.pre,{icon:t.Dr,"data-language":"js","data-copy":"",children:(0,n.jsx)(i.code,{children:(0,n.jsxs)(i.span,{children:[(0,n.jsx)(i.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"await"}),(0,n.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" server."}),(0,n.jsx)(i.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"listen"}),(0,n.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"(addr, credentials)"})]})})}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.strong,{children:"Description:"})}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"Listens on an address and port to start the gRPC service."}),"\n"]}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.strong,{children:"Parameters:"})}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"addr"}),": (required) The address and port to listen to for service startup. Supported types include:","\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:["string: in the format of ip+port, like ",(0,n.jsx)(i.code,{children:"127.0.0.1:9099"}),";"]}),"\n",(0,n.jsxs)(i.li,{children:["object: ",(0,n.jsx)(i.code,{children:"{ host, port }"}),";","\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"host: a string that supports both IP and domain names;"}),"\n",(0,n.jsx)(i.li,{children:"port: a number, with a minimum value of 0 and a maximum value of 65535;"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"credentials"}),": (optional) Generated using ",(0,n.jsx)(i.code,{children:"makeServerCredentials"})," and passed to the ",(0,n.jsx)(i.code,{children:"listen"})," call;"]}),"\n"]}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.strong,{children:"Return Value:"})}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"void: No return value."}),"\n"]}),"\n",(0,n.jsx)(i.h3,{id:r[6].id,children:r[6].value}),"\n",(0,n.jsx)(i.pre,{icon:t.Dr,"data-language":"js","data-copy":"",children:(0,n.jsx)(i.code,{children:(0,n.jsxs)(i.span,{children:[(0,n.jsx)(i.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"await"}),(0,n.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" server."}),(0,n.jsx)(i.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"shutdown"}),(0,n.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"()"})]})})}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.strong,{children:"Description:"})}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"Gracefully shuts down the gRPC service."}),"\n"]}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.strong,{children:"Parameters:"})}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"void: No parameters."}),"\n"]}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.strong,{children:"Return Value:"})}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"void: No return value."}),"\n"]}),"\n",(0,n.jsx)(i.h3,{id:r[7].id,children:r[7].value}),"\n",(0,n.jsx)(i.pre,{icon:t.Dr,"data-language":"js","data-copy":"",children:(0,n.jsx)(i.code,{children:(0,n.jsxs)(i.span,{children:[(0,n.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"server."}),(0,n.jsx)(i.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"forceShutdown"}),(0,n.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"()"})]})})}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.strong,{children:"Description:"})}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"Forcefully shuts down the gRPC service."}),"\n"]}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.strong,{children:"Parameters:"})}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"void: No parameters."}),"\n"]}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.strong,{children:"Return Value:"})}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"void: No return value."}),"\n"]})]})},"/en-US/apis/server",{filePath:"pages/en-US/apis/server.mdx",timestamp:1699236606e3,pageMap:l.v,frontMatter:{},title:"Server API"},"undefined"==typeof RemoteContent?useTOC:RemoteContent.useTOC);function HOC(e){return a(e)}},1054:function(e,r,i){"use strict";i.d(r,{v:function(){return n}});let n=[{data:{index:"Home",start:"Get Started",guide:"User Guide",apis:"API"}},{name:"apis",route:"/en-US/apis",children:[{data:{grpcloader:"gRPC Loader",server:"Server","client-proxy":"Client Proxy"}},{name:"client-proxy",route:"/en-US/apis/client-proxy",frontMatter:{sidebar_label:"Client Proxy"}},{name:"grpcloader",route:"/en-US/apis/grpcloader",frontMatter:{sidebar_label:"Grpcloader"}},{name:"server",route:"/en-US/apis/server",frontMatter:{sidebar_label:"Server"}}]},{name:"apis",route:"/en-US/apis",frontMatter:{sidebar_label:"Apis"}},{name:"guide",route:"/en-US/guide",children:[{data:{loader:"Loader",config:"Config",server:"Server",client:"Client",metadata:"Metadata","stream-v2":"Stream v2",stream:"Stream",credentials:"Credentials",status:"Status",error:"Error",middleware:"Middleware",proto:"Proto"}},{name:"client",route:"/en-US/guide/client",frontMatter:{sidebar_label:"Client"}},{name:"config",route:"/en-US/guide/config",frontMatter:{sidebar_label:"Config"}},{name:"credentials",route:"/en-US/guide/credentials",frontMatter:{sidebar_label:"Credentials"}},{name:"error",route:"/en-US/guide/error",frontMatter:{sidebar_label:"Error"}},{name:"loader",route:"/en-US/guide/loader",frontMatter:{sidebar_label:"Loader"}},{name:"metadata",route:"/en-US/guide/metadata",frontMatter:{sidebar_label:"Metadata"}},{name:"middleware",route:"/en-US/guide/middleware",frontMatter:{sidebar_label:"Middleware"}},{name:"proto",route:"/en-US/guide/proto",frontMatter:{sidebar_label:"Proto"}},{name:"server",route:"/en-US/guide/server",frontMatter:{sidebar_label:"Server"}},{name:"status",route:"/en-US/guide/status",frontMatter:{sidebar_label:"Status"}},{name:"stream-v2",route:"/en-US/guide/stream-v2",frontMatter:{sidebar_label:"Stream V2"}},{name:"stream",route:"/en-US/guide/stream",frontMatter:{sidebar_label:"Stream"}}]},{name:"guide",route:"/en-US/guide",frontMatter:{sidebar_label:"Guide"}},{name:"index",route:"/en-US",frontMatter:{sidebar_label:"Index"}},{name:"start",route:"/en-US/start",children:[{data:{"proto-loader":"Proto Loader",server:"Server Side",client:"Client Side"}},{name:"client",route:"/en-US/start/client",frontMatter:{sidebar_label:"Client"}},{name:"proto-loader",route:"/en-US/start/proto-loader",frontMatter:{sidebar_label:"Proto Loader"}},{name:"server",route:"/en-US/start/server",frontMatter:{sidebar_label:"Server"}}]},{name:"start",route:"/en-US/start",frontMatter:{sidebar_label:"Start"}}]}},function(e){e.O(0,[7812,9774,2888,179],function(){return e(e.s=8565)}),_N_E=e.O()}]);